<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Concrete Flatwork — Instant Quote</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Oswald:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --brand:#f1592a; /* construction orange */
      --brand-dark:#c94722;
      --ink:#0b1220;
      --muted:#6b7280;
      --bg:#ffffff; /* white background */
      --card:#f9fafb; /* light card */
      --shadow:0 6px 18px rgba(0,0,0,.1);
      --radius:12px;
      --border:#e5e7eb;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:var(--bg)}
    h1,h2,h3{font-family:Oswald,Inter,system-ui,sans-serif;letter-spacing:.02em;color:#111827}
    .container{max-width:1200px;margin:0 auto;padding:40px 20px}
    .hero{display:none} /* legacy hero hidden when video hero present */
    .hero-video{position:relative;height:520px;border-radius:12px;overflow:hidden;box-shadow:var(--shadow);border:2px solid var(--brand);}
    .hero-video video{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:brightness(.55);} 
    .hero-overlay{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;color:#fff;padding:24px}
    .hero-overlay h1{font-size:40px;margin:10px 0 8px}
    .hero-overlay p{max-width:820px;margin:0 auto 18px;color:#e5e7eb}
    .hero-cta{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}
    .hero-cta .btn-outline{border-color:#fff;color:#fff}
    @media (max-width:720px){.hero-overlay h1{font-size:30px}}
    @media (prefers-reduced-motion: reduce){.hero-video video{display:none}.hero-video{background:#111 url('poster.jpg') center/cover no-repeat}}
    .badge{display:inline-block;background:var(--brand);color:#fff;padding:6px 14px;border-radius:999px;font-size:12px;font-weight:800;text-transform:uppercase;letter-spacing:.09em}
    .actions{display:flex;gap:10px}
    .btn{appearance:none;border:0;border-radius:8px;padding:12px 16px;font-weight:800;cursor:pointer;text-transform:uppercase;letter-spacing:.06em}
    .btn-primary{background:var(--brand);color:#fff}
    .btn-outline{background:transparent;border:2px solid var(--brand);color:var(--brand)}
    .grid{display:grid;grid-template-columns:1.1fr .9fr;gap:22px;margin-top:22px}
    @media (max-width:1100px){.grid{grid-template-columns:1fr}}
    .card{background:#fff;border:1px solid var(--border);padding:20px;border-radius:var(--radius);box-shadow:var(--shadow)}
    .subgrid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    @media (max-width:780px){.subgrid{grid-template-columns:1fr}}
    label{font-size:13px;color:#374151;margin-bottom:6px;display:block;font-weight:600}
    select,input[type=text],input[type=email],input[type=number]{width:100%;padding:10px;border:1px solid #d1d5db;border-radius:8px;font-size:14px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:780px){.row{grid-template-columns:1fr}}
    .help{font-size:12px;color:#6b7280}
    .summary{background:#fff;border:2px solid var(--brand);border-radius:var(--radius);padding:16px}
    .summary h2{margin:0 0 6px;color:var(--brand);font-size:24px}
    table{width:100%;border-collapse:collapse;font-size:13px}
    th,td{padding:10px;border-bottom:1px solid #eef2f7;text-align:left}
    th{background:#f3f4f6;font-weight:700}
    .kpis{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .pill{border:1px solid #e5e7eb;border-radius:999px;padding:6px 10px;background:#fff;color:#374151;font-size:12px}
    .footer{text-align:center;margin-top:26px;color:#6b7280;font-size:12px}
    .section-title{margin:10px 0 6px}
  </style>
</head>
<body>
  <div class="container">
    <section class="hero-video" aria-label="Instant Quote Demo">
  <video id="demoBg" autoplay muted playsinline loop poster="/media/instant-quote-poster.jpg">
    <source src="/media/instant-quote-demo.mp4" type="video/mp4">
    <!-- Optional fallback format -->
    <source src="/media/instant-quote-demo.webm" type="video/webm">
  </video>

  <div class="hero-overlay">
    <span class="badge">Concrete Flatwork — Instant Quote</span>
    <h1>Book Jobs Instantly. Right From Your Website.</h1>
    <p>See the tool live in action. Built for contractors — quote by square footage, generate instant PDFs, and close jobs faster.</p>
    <div class="hero-cta">
      <button class="btn btn-primary" id="scrollToCalc">Try the Live Demo</button>
      <button class="btn btn-outline" id="watchDemo">Play Video</button>
    </div>
  </div>
</section>

      <div class="actions">
        <button class="btn btn-outline" id="watchDemo">Demo</button>
        <button class="btn btn-primary" id="scrollToCalc">Start</button>
      </div>
    </div>

    <div class="grid" id="calc">
      <div class="card">
        <h3 class="section-title">Measurements</h3>
        <div class="subgrid">
          <div>
            <label>Length (ft)</label>
            <input type="number" id="len" placeholder="e.g. 40" min="0">
          </div>
          <div>
            <label>Width (ft)</label>
            <input type="number" id="wid" placeholder="e.g. 20" min="0">
          </div>
          <div>
            <label>Total Area (sq ft) <span class="help">(auto from L×W if blank)</span></label>
            <input type="number" id="area" placeholder="e.g. 800" min="0">
          </div>
          <div>
            <label>Perimeter (lf) <span class="help">(auto from L & W; editable)</span></label>
            <input type="number" id="perim" placeholder="auto" min="0">
          </div>
        </div>

        <h3 class="section-title">Spec & Options</h3>
        <div class="subgrid">
          <div>
            <label>Thickness</label>
            <select id="thickness">
              <option value="4">4" (standard patio/walk)</option>
              <option value="5">5" (heavy‑duty)</option>
              <option value="6">6" (drive/vehicle)</option>
            </select>
          </div>
          <div>
            <label>Finish</label>
            <select id="finish">
              <option value="broom">Broom</option>
              <option value="smooth">Smooth/Steel Trowel</option>
              <option value="stamped">Stamped/Decorative</option>
            </select>
          </div>
          <div>
            <label>Reinforcement</label>
            <select id="reinforcement">
              <option value="none">None</option>
              <option value="fiber">Fiber Mesh</option>
              <option value="mesh">Wire Mesh (6x6)</option>
              <option value="rebar">#3 Rebar Grid</option>
            </select>
          </div>
          <div>
            <label>Control Joints spacing (ft)</label>
            <input type="number" id="jointSpacing" value="10" min="5">
          </div>
          <div>
            <label>Access</label>
            <select id="access">
              <option value="easy">Easy</option>
              <option value="standard" selected>Standard</option>
              <option value="tight">Tight / Limited</option>
            </select>
          </div>
          <div>
            <label>Extras</label>
            <div>
              <label class="help"><input type="checkbox" id="needPump"> Concrete pump needed</label><br>
              <label class="help"><input type="checkbox" id="demo"> Demo & haul existing slab</label>
              <div id="demoRow" style="display:none;margin-top:6px">
                <label>Existing thickness</label>
                <select id="demoThk">
                  <option value="4">4"</option>
                  <option value="5">5"</option>
                  <option value="6">6"</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <h3 class="section-title">Contact (for PDF)</h3>
        <div class="subgrid">
          <div>
            <label>Name</label>
            <input type="text" id="name" placeholder="Full name" />
          </div>
          <div>
            <label>Email</label>
            <input type="email" id="email" placeholder="you@example.com" />
          </div>
        </div>
      </div>

      <div class="card">
        <h3 class="section-title">Estimate</h3>
        <div class="summary">
          <h2 id="range">$0 – $0</h2>
          <div class="kpis">
            <span class="pill" id="kpiArea">Area: 0 sq ft</span>
            <span class="pill" id="kpiYds">Concrete: 0.0 yd³</span>
            <span class="pill" id="kpiPerim">Forms: 0 lf</span>
          </div>
        </div>
        <div style="margin-top:12px">
          <table id="lineItems">
            <thead>
              <tr><th>Line Item</th><th>Qty</th><th>Rate</th><th>Total</th></tr>
            </thead>
            <tbody></tbody>
            <tfoot>
              <tr><th colspan="3" style="text-align:right">Subtotal</th><th id="subtotal">$0</th></tr>
            </tfoot>
          </table>
        </div>
        <div style="display:flex;gap:10px;margin-top:12px;flex-wrap:wrap">
          <button class="btn btn-primary" id="downloadPdf">Download PDF</button>
          <button class="btn btn-outline" id="copyLink">Copy Share Link</button>
          <span id="copiedMsg" class="help" style="display:none">Link copied.</span>
        </div>
      </div>
    </div>

    <div class="footer">© 2025 BIM Labs Studio — Concrete Flatwork Instant Quote</div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script>
    // ---- Pricing Model (tunable) ----
    const PRICING = {
      baseSqFt: { // includes standard labor+materials by thickness
        4: 12.00,
        5: 14.00,
        6: 16.00,
      },
      finishMult: { broom: 1.00, smooth: 1.05, stamped: 1.35 },
      reinforcementSqFt: { none: 0, fiber: 0.75, mesh: 1.25, rebar: 2.5 },
      jointsLF: 1.50,      // saw‑cut control joints per linear foot
      formsLF: 1.20,       // forms/edge boards per linear foot
      pumpFlat: 450,       // concrete pump if required
      mobilization: 250,   // fixed
      demoSqFtBase: 2.50,  // demo & haul existing @4" baseline (scaled by thickness)
      accessMult: { easy: 1.00, standard: 1.05, tight: 1.12 },
      rangeBuffer: 0.10,   // ±10%
      waste: 0.08          // 8% waste on yards
    };

    const els = {
      len: document.getElementById('len'),
      wid: document.getElementById('wid'),
      area: document.getElementById('area'),
      perim: document.getElementById('perim'),
      thickness: document.getElementById('thickness'),
      finish: document.getElementById('finish'),
      reinforcement: document.getElementById('reinforcement'),
      jointSpacing: document.getElementById('jointSpacing'),
      access: document.getElementById('access'),
      needPump: document.getElementById('needPump'),
      demo: document.getElementById('demo'),
      demoThk: document.getElementById('demoThk'),
      name: document.getElementById('name'),
      email: document.getElementById('email'),
      range: document.getElementById('range'),
      kpiArea: document.getElementById('kpiArea'),
      kpiYds: document.getElementById('kpiYds'),
      kpiPerim: document.getElementById('kpiPerim'),
      tbody: document.querySelector('#lineItems tbody'),
      subtotal: document.getElementById('subtotal'),
      copyLink: document.getElementById('copyLink'),
      copiedMsg: document.getElementById('copiedMsg'),
      downloadPdf: document.getElementById('downloadPdf'),
      scrollToCalc: document.getElementById('scrollToCalc'),
      watchDemo: document.getElementById('watchDemo'),
      demoRow: document.getElementById('demoRow')
    };

    function val(n){return isNaN(n)||!isFinite(n)?0:n}
    function fmt(n){return n.toLocaleString('en-US',{style:'currency',currency:'USD',maximumFractionDigits:0})}

    function computeInputs(){
      const L = val(parseFloat(els.len.value));
      const W = val(parseFloat(els.wid.value));
      let A = val(parseFloat(els.area.value));
      const P = val(parseFloat(els.perim.value));
      const thk = parseInt(els.thickness.value,10);
      const finish = els.finish.value;
      const reinf = els.reinforcement.value;
      const spacing = Math.max(5, val(parseFloat(els.jointSpacing.value))||10);
      const access = els.access.value;
      const needPump = els.needPump.checked;
      const demo = els.demo.checked;
      const demoThk = parseInt(els.demoThk.value||'4',10);

      // Auto area/perimeter if length/width provided
      if(!A && L>0 && W>0){ A = Math.round(L*W); }
      let perim = P; if(!perim && L>0 && W>0){ perim = Math.round(2*(L+W)); }

      // Control joints LF (approx): lines along each axis excluding edges
      let jointsLF = 0;
      if(L>0 && W>0){
        const cutsX = Math.max(0, Math.floor(L/spacing)-1);
        const cutsY = Math.max(0, Math.floor(W/spacing)-1);
        jointsLF = Math.round(cutsX*W + cutsY*L);
      }

      // Concrete yards with waste
      const yards = A>0 ? ((A * (thk/12)) / 27) * (1+PRICING.waste) : 0;

      return {L,W,A,perim,thk,finish,reinf,spacing,access,needPump,demo,demoThk,jointsLF,yards};
    }

    function buildLineItems(inp){
      const items = [];
      // Base concrete by thickness and finish multiplier
      const baseRate = PRICING.baseSqFt[inp.thk] || PRICING.baseSqFt[4];
      const finishMult = PRICING.finishMult[inp.finish] || 1;
      const accessMult = PRICING.accessMult[inp.access] || 1;
      const baseTotal = inp.A * baseRate * finishMult * accessMult;
      items.push({name:`Concrete ${inp.thk}\" — ${inp.finish} finish`, qty:`${inp.A.toLocaleString()} sf`, rate:fmt(baseRate*finishMult*accessMult), total:baseTotal});

      // Reinforcement add‑on (per sf)
      const rAdd = PRICING.reinforcementSqFt[inp.reinf] || 0;
      if(rAdd>0){
        items.push({name:`Reinforcement (${inp.reinf})`, qty:`${inp.A.toLocaleString()} sf`, rate:fmt(rAdd), total: inp.A*rAdd});
      }

      // Joints & Forms
      if(inp.jointsLF>0){ items.push({name:'Control joints (saw‑cut)', qty:`${inp.jointsLF} lf`, rate:fmt(PRICING.jointsLF), total: inp.jointsLF*PRICING.jointsLF}); }
      if(inp.perim>0){ items.push({name:'Forms & edging', qty:`${inp.perim} lf`, rate:fmt(PRICING.formsLF), total: inp.perim*PRICING.formsLF}); }

      // Demo & Haul
      if(inp.demo && inp.A>0){
        const demoRate = PRICING.demoSqFtBase * (inp.demoThk/4);
        items.push({name:`Demo & haul existing (${inp.demoThk}\")`, qty:`${inp.A.toLocaleString()} sf`, rate:fmt(demoRate), total: inp.A*demoRate});
      }

      // Pump + Mobilization
      if(inp.needPump){ items.push({name:'Concrete pump (flat)', qty:'1', rate:fmt(PRICING.pumpFlat), total: PRICING.pumpFlat}); }
      items.push({name:'Mobilization', qty:'1', rate:fmt(PRICING.mobilization), total: PRICING.mobilization});

      return items;
    }

    function render(){
      const inp = computeInputs();
      // KPIs
      els.kpiArea.textContent = `Area: ${Math.round(inp.A).toLocaleString()} sq ft`;
      els.kpiYds.textContent = `Concrete: ${inp.yards.toFixed(1)} yd³`;
      els.kpiPerim.textContent = `Forms: ${inp.perim||0} lf`;

      // Line items
      const items = buildLineItems(inp);
      els.tbody.innerHTML = '';
      let sub = 0;
      items.forEach(it=>{ sub += it.total; const tr=document.createElement('tr'); tr.innerHTML = `<td>${it.name}</td><td>${it.qty}</td><td>${it.rate}</td><td>${fmt(it.total)}</td>`; els.tbody.appendChild(tr); });
      els.subtotal.textContent = fmt(sub);

      // Range
      const buffer = PRICING.rangeBuffer;
      const low = Math.max(0, Math.round(sub * (1-buffer)));
      const high = Math.round(sub * (1+buffer));
      els.range.textContent = `${fmt(low)} – ${fmt(high)}`;

      // Toggle demo thickness UI
      els.demoRow.style.display = inp.demo ? 'block' : 'none';
    }

    // Events
    ['len','wid','area','perim','thickness','finish','reinforcement','jointSpacing','access','demoThk'].forEach(id=>{
      els[id].addEventListener('input', render);
      els[id].addEventListener('change', render);
    });
    els.needPump.addEventListener('change', render);
    els.demo.addEventListener('change', render);

    els.scrollToCalc.addEventListener('click',()=>{ document.getElementById('calc').scrollIntoView({behavior:'smooth'}); });
    els.watchDemo.addEventListener('click',()=>{ const v=document.getElementById('demoBg'); if(v && v.paused){ v.play().catch(()=>{});} else { alert('This is an embedded HTML5 video (no YouTube). Replace the .mp4 URL with your hosted file.'); } });

    // Pause video when tab hidden to save CPU
    document.addEventListener('visibilitychange',()=>{ const v=document.getElementById('demoBg'); if(!v) return; if(document.hidden){ v.pause(); } else { v.play().catch(()=>{}); } }); });

    els.copyLink.addEventListener('click', async ()=>{
      const params = new URLSearchParams({
        len:els.len.value,wid:els.wid.value,area:els.area.value,perim:els.perim.value,
        thk:els.thickness.value,finish:els.finish.value,reinf:els.reinforcement.value,js:els.jointSpacing.value,
        access:els.access.value,pump:els.needPump.checked?'1':'',demo:els.demo.checked?'1':'',dthk:els.demoThk.value,
        name:els.name.value,email:els.email.value
      });
      const url = `${location.origin}${location.pathname}?${params.toString()}`;
      await navigator.clipboard.writeText(url);
      els.copiedMsg.style.display='inline';
      setTimeout(()=> els.copiedMsg.style.display='none',1600);
    });

    els.downloadPdf.addEventListener('click', ()=>{
      const { jsPDF } = window.jspdf; const doc = new jsPDF({unit:'pt', format:'letter'});
      const W = doc.internal.pageSize.getWidth();
      // Header
      doc.setFillColor('#f1592a'); doc.rect(0,0,W,70,'F');
      doc.setFont('helvetica','bold'); doc.setFontSize(16); doc.setTextColor('#ffffff');
      doc.text('Concrete Flatwork — Instant Quote', 40, 44);
      // Body
      doc.setTextColor('#0b1220'); doc.setFont('helvetica','normal'); doc.setFontSize(12);
      const inp = computeInputs();
      let y = 100; const line=(l,v)=>{doc.setFont('helvetica','bold');doc.text(l,40,y);doc.setFont('helvetica','normal');doc.text(String(v),220,y); y+=20;};
      line('Area (sq ft)', Math.round(inp.A));
      line('Thickness', `${inp.thk}\"`);
      line('Finish', inp.finish);
      line('Reinforcement', inp.reinf);
      line('Concrete (yd³)', inp.yards.toFixed(1));
      line('Forms (lf)', inp.perim||0);
      line('Control joints (lf)', inp.jointsLF||0);
      y+=6; doc.setDrawColor('#e5e7eb'); doc.line(40,y,W-40,y); y+=22;
      // Line items table
      doc.setFont('helvetica','bold'); doc.text('Line Items', 40, y); y+=14; doc.setFont('helvetica','normal');
      const items = buildLineItems(inp);
      items.forEach(it=>{ doc.text(it.name, 40, y); doc.text(it.qty, 320, y); doc.text(it.rate, 420, y); doc.text(fmt(it.total), 510, y,{align:'right'}); y+=18; });
      y+=8; doc.setDrawColor('#e5e7eb'); doc.line(40,y,W-40,y); y+=18;
      const sub = items.reduce((s,i)=>s+i.total,0);
      doc.setFont('helvetica','bold'); doc.text(`Estimated Range: ${document.getElementById('range').textContent}`, 40, y); y+=22;
      doc.setFont('helvetica','normal'); doc.text(`Subtotal: ${fmt(sub)}`, 40, y); y+=28;
      const footer = `Generated for ${els.name.value||'—'} • ${els.email.value||'—'} • ${new Date().toLocaleString()}`;
      doc.setTextColor('#6b7280'); doc.text(footer, 40, 760);
      doc.save('Concrete-Instant-Quote.pdf');
    });

    function loadFromURL(){
      const q=new URLSearchParams(location.search);
      ['len','wid','area','perim'].forEach(k=>{ if(q.get(k)!==null) els[k].value = q.get(k) });
      if(q.get('thk')) els.thickness.value = q.get('thk');
      if(q.get('finish')) els.finish.value = q.get('finish');
      if(q.get('reinf')) els.reinforcement.value = q.get('reinf');
      if(q.get('js')) els.jointSpacing.value = q.get('js');
      if(q.get('access')) els.access.value = q.get('access');
      els.needPump.checked = q.get('pump')==='1';
      els.demo.checked = q.get('demo')==='1';
      if(q.get('dthk')) els.demoThk.value = q.get('dthk');
      if(q.get('name')) els.name.value = q.get('name');
      if(q.get('email')) els.email.value = q.get('email');
    }

    loadFromURL();
    render();
  </script>
</body>
</html>
