<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>BIM Labs — Contractors | Instant Quote</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800;900&display=swap" rel="stylesheet" />
<style>
/* ===== Reset / Base ===== */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0; background: #101014; color: #E8EEF6;
  font-family: 'Montserrat', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
  letter-spacing: .01em;
}
:root{
  --black:#101014; --blue:#4EC6FF; --white:#fff;
  --ink:#E8EEF6; --muted:#B8C6D8; --line:#1E232E; --glass:rgba(16,22,30,.78);
}

/* ===== Full-screen HERO ===== */
#contractor-hero{
  min-height: 100vh; display:grid; place-items:center; position:relative; overflow:hidden;
  background:
    radial-gradient(900px 600px at 82% -10%, rgba(78,198,255,.08), transparent 60%),
    radial-gradient(800px 500px at -10% 0%, rgba(78,198,255,.06), transparent 60%),
    var(--black);
}
.hero-shell{ width:min(1200px, 92vw); margin:0 auto; padding: clamp(40px, 6vw, 80px) 0; }
.hero-eyebrow{
  color: var(--blue); text-transform: uppercase; letter-spacing: .18em;
  font-weight:900; font-size:.8rem; margin:0 0 .6rem;
}
.hero-title{
  margin:.1rem 0 .6rem; font-weight:900; line-height:1.04;
  font-size: clamp(34px, 6vw, 64px); color:#fff;
}
.hero-sub{ max-width: 70ch; color: var(--muted); margin: 0 0 1.1rem; font-size: clamp(1rem, 2vw, 1.2rem); }
.hero-chips{ display:flex; gap:.6rem; flex-wrap:wrap; margin: .7rem 0 1.2rem; padding:0; list-style:none; }
.hero-chips li{
  padding:.45rem .8rem; border-radius:999px; background:rgba(255,255,255,.05);
  border:1px solid #243146; color:#bcd2ea; font-weight:800; font-size:.95rem;
}
.hero-cta{ display:flex; gap:.8rem 1rem; flex-wrap:wrap; margin-top:.5rem; }
.btn{
  display:inline-flex; align-items:center; justify-content:center; gap:.6rem;
  padding: .95rem 1.5rem; border-radius: 999px; font-weight:900; text-decoration:none; cursor:pointer;
  border: none; min-width: 180px;
}
.btn--primary{ background: var(--blue); color:#0b1016; box-shadow:0 12px 30px rgba(78,198,255,.28); }
.btn--primary:hover{ filter: brightness(.96); }
.btn--ghost{ background:#0E1116; color:#fff; }
.hero-rail{ height:6px; width:100%; position:absolute; top:0; left:0;
  background:linear-gradient(90deg,var(--blue),rgba(78,198,255,.35),var(--blue));
  box-shadow:0 10px 28px #4ec6ff2b;
}

/* ===== Full page Instant Quote (tight, structured) ===== */
#iqt-pro{
  position:relative; padding: clamp(32px, 6vw, 72px) 0;
  background:
    radial-gradient(900px 600px at 12% -10%, rgba(78,198,255,.06), transparent 60%),
    radial-gradient(800px 500px at 110% 0%, rgba(78,198,255,.06), transparent 60%),
    var(--black);
}
.iqt-shell{ width:min(1200px, 92vw); margin:0 auto; }
.iqt-head{ text-align:center; margin-bottom: clamp(18px, 3vw, 28px); }
.iqt-eyebrow{ color: var(--blue); text-transform:uppercase; letter-spacing:.18em; font-weight:900; font-size:.8rem; margin:0 0 .6rem; }
.iqt-title{ margin:.2rem 0 .4rem; font-weight:900; line-height:1.06; font-size: clamp(28px, 4.8vw, 42px); color:#fff; }
.iqt-sub{ max-width:70ch; margin:0 auto; color:var(--muted); }
.iqt-chips{ display:flex; gap:.6rem; flex-wrap:wrap; justify-content:center; margin:1rem 0 0; padding:0; list-style:none; }
.iqt-chips li{ padding:.45rem .8rem; border-radius:999px; background:rgba(255,255,255,.05); border:1px solid #243146; color:#bcd2ea; font-weight:800; }

/* Grid: left form / right sticky estimate */
.iqt-grid{
  display:grid; grid-template-columns:1.15fr .85fr; gap:22px; align-items:start;
}
@media (max-width: 1020px){ .iqt-grid{ grid-template-columns:1fr; } }

.card{
  background:var(--glass); border:1px solid var(--line); border-radius:16px;
  box-shadow:0 10px 36px rgba(0,0,0,.35), 0 6px 24px rgba(78,198,255,.12);
}
.card-head{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  padding:14px 16px; border-bottom:1px solid #243146; background:linear-gradient(180deg, rgba(255,255,255,.03), transparent);
}
.card-title{ margin:0; font-size:1.05rem; font-weight:900; color:#eaf3ff; }
.card-body{ padding:14px 16px 16px; }

.sticky{ position: sticky; top: 18px; }

/* Sections inside form */
.sec{ border:1px solid #243146; border-radius:12px; padding:12px; background:#0f141c; margin: 10px 0; }
.sec-title{ margin:0 0 8px; font-weight:900; color:#9fd6ff; font-size:.98rem; }
.row{ display:grid; gap:12px; }
.row.two{ grid-template-columns:1fr 1fr; }
@media (max-width: 700px){ .row.two{ grid-template-columns:1fr; } }
.label{ display:block; font-weight:900; color:var(--blue); margin:.2rem 0 .25rem; }
.input{
  width:100%; background:#0f141c; color:#eaf3ff; border:1px solid #223146; border-radius:10px;
  padding:.82rem 1rem; font-size:1rem; outline:none; transition:border .15s, box-shadow .15s;
}
.input:focus{ border-color:#2a90c6; box-shadow:0 0 0 6px rgba(78,198,255,.18) }
.check{ display:flex; align-items:center; gap:.55rem; color:#cfe1f4; font-weight:800; }
.hint{ color:#9db2c8; font-size:.9rem; }

/* Tabbed trades */
.tabs{ display:flex; gap:6px; flex-wrap:wrap; margin: 2px 0 10px; }
.tab{
  border:1px solid #243146; background:#0f141c; color:#cfe1f4; font-weight:800;
  padding:.5rem .9rem; border-radius:999px; cursor:pointer;
}
.tab.is-on, .tab:hover{ border-color: var(--blue); box-shadow:0 0 0 6px rgba(78,198,255,.18); }

/* Actions footer inside form */
.form-actions{
  display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:flex-end;
  padding-top: 8px; border-top:1px solid #243146; margin-top: 12px;
}
.btn--neutral{ background:#223146; color:#dfe8f5; }
.btn--neutral:hover{ background:#2a3b54; }

/* Estimate card */
.pill{ display:inline-block; background:#101a27; color:#9fd6ff; border:1px solid #243146; font-weight:900; padding:.26rem .7rem; border-radius:999px; }
.range{ display:flex; gap:18px; align-items:flex-end; justify-content:space-between; margin:.6rem 0 .6rem }
.num{ font-size:clamp(22px,3.4vw,34px); font-weight:900; color:#fff }
.numhint{ color:#9db2c8; font-weight:700; font-size:.92rem }

.acc{ display:flex; align-items:center; gap:.5rem; margin:.2rem 0 .8rem; flex-wrap:wrap }
.acc-label{ font-weight:900; color:#9fd6ff }
.acc-bar{ height:8px; width:180px; background:#162033; border:1px solid #223146; border-radius:999px; overflow:hidden }
.acc-bar span{ display:block; height:100%; background:linear-gradient(90deg,#4EC6FF,#8EE4FF) }
.acc-note{ color:#9db2c8; font-weight:700; font-size:.95rem }

.bars{ display:grid; gap:.45rem; margin:.4rem 0 .6rem }
.bline{ display:grid; grid-template-columns:1fr auto auto; gap:10px; align-items:center }
.rail{ height:8px; background:#162033; border:1px solid #223146; border-radius:999px; overflow:hidden }
.rail i{ display:block; height:100%; background:linear-gradient(90deg,#4EC6FF,#7DD3FF) }

.assm{ margin-top:.6rem; border:1px solid #243146; border-radius:12px; padding:.6rem .8rem; background:#0f141c }
.assm summary{ cursor:pointer; font-weight:900; color:#eaf3ff }
.assm ul{ margin:.4rem 0 0; padding-left:1.1rem; color:#cfe1f4; line-height:1.6 }

/* Email block in estimate card */
.stack{ display:grid; gap:10px; margin-top: 10px; }
.error{ color:#ff9b9b; font-weight:800; margin:.4rem 0 0 }
.success{
  background:#0f141c; border:1px solid #243146; border-radius:12px; padding:.9rem; text-align:center; margin-top:.7rem
}
.check{ width:22px; height:22px; border-radius:50%; background:#22d3ee; margin:.2rem auto .5rem; position:relative; box-shadow:0 0 0 6px #22d3ee22 }
.check::after{ content:""; position:absolute; left:6px; top:5px; width:8px; height:4px; border:3px solid #0b1320; border-top:none; border-right:none; transform:rotate(-45deg) }

/* Footer (clean) */
.footer{
  border-top:1px solid #1e232e; padding: 20px 0; text-align:center; color:#b6c2d1;
}
.footer-in{ width:min(1200px,92vw); margin:0 auto; font-size:.95rem; }
</style>
</head>
<body>

<section id="contractor-hero">
  <div class="hero-rail" aria-hidden="true"></div>
  <div class="hero-shell">
    <p class="hero-eyebrow">For Contractors</p>
    <h1 class="hero-title">Stop losing jobs to slow quotes.</h1>
    <p class="hero-sub">
      Give prospects a credible range in 60 seconds. One closed job usually pays for the whole build.
      We set you up, train you, and hand it over — no retainer.
    </p>
    <ul class="hero-chips">
      <li>Instant ballpark with ± confidence</li>
      <li>Trade-specific logic (roofing, remodel, HVAC, landscaping)</li>
      <li>Branded PDF/email quotes</li>
    </ul>
    <div class="hero-cta">
      <a href="#offer" class="btn btn--primary">Claim Founder Price</a>
      <a href="#iqt-pro" class="btn btn--ghost">Try the Instant Quote</a>
    </div>
  </div>
</section>

<!-- ============================
  BIM Labs — Contractors Hero + Shared-Outcome Offer
  Brand: #101014 / #4EC6FF / #FFFFFF
============================= -->
<section id="bim-hero" class="bim-hero" aria-labelledby="heroTitle">
  <div class="bim-hero__rail" aria-hidden="true"></div>
  <div class="bim-hero__shell">
    <div class="bim-hero__grid">
      <!-- LEFT: Value Story -->
      <header class="bim-hero__copy">
        <p class="bim-hero__eyebrow">For Contractors</p>
        <h1 id="heroTitle" class="bim-hero__title">
          Faster quotes. Fewer calls. More booked jobs.
        </h1>
        <p class="bim-hero__sub">
          We build a conversion-first website and an Instant Quote tool that gives prospects a credible range in 60 seconds—then routes them to a site assessment. It’s designed for custom work with adjustable assumptions so your margins stay safe.
        </p>
        <ul class="bim-hero__chips">
          <li>Ballpark with ± confidence</li>
          <li>Trade-specific logic (roofing, remodel, HVAC, landscaping)</li>
          <li>Branded email summary + CRM wiring</li>
        </ul>

        <div class="bim-hero__cta">
          <a href="#iqt-pro" class="btn btn--primary">Try the Instant Quote</a>
          <a href="#shared-offer" class="btn btn--ghost">See Shared-Outcome Offer</a>
        </div>
      </header>

      <!-- RIGHT: Proof Card -->
      <aside class="bim-hero__card">
        <div class="card-head">
          <h3 class="card-title">What you get in 2–3 weeks</h3>
        </div>
        <div class="card-body">
          <ul class="bim-hero__list">
            <li><strong>8-section website</strong> in the BIM Labs style</li>
            <li><strong>Instant Quote tool</strong> with trade rules</li>
            <li><strong>3 landing pages</strong> (offer / lead magnet / retarget)</li>
            <li><strong>CRM wiring</strong> (forms, pipeline, scheduling)</li>
            <li><strong>Playbooks</strong> for four growth campaigns</li>
          </ul>
          <div class="bim-hero__value">
            <span class="tag">Valued at $8,700+</span>
            <span class="tag tag--blue">Founder price: $850</span>
          </div>
          <p class="bim-hero__fine">Founder pricing limited to 5 builds/month.</p>
        </div>
      </aside>
    </div>
  </div>
</section>

<section id="offer" style="padding: clamp(28px,6vw,56px) 0; background: radial-gradient(900px 600px at 12% -10%, rgba(78,198,255,.06), transparent 60%), #101014;">
  <div class="iqt-shell">
    <div class="card">
      <div class="card-head">
        <h2 class="card-title">Founder Build — $1,500</h2>
        <span class="pill">Only <b id="slots">3</b> slots</span>
      </div>
      <div class="card-body">
        <div class="row two">
          <ul style="margin:0; padding-left:1.1rem; line-height:1.7; color:#e3ecf3">
            <li>Custom 8-section website (BIM Labs style)</li>
            <li>3 landing pages (offer • retarget • lead magnet)</li>
            <li>Instant Quote Tool (+ branded PDF/email)</li>
            <li>4 “Money Model” campaign guides</li>
            <li>Training & full handoff — you own it</li>
          </ul>
          <div>
            <div class="pill" style="margin-bottom:.6rem">Valued at $8,700+</div>
            <p class="hint" style="margin:.2rem 0 .8rem">Founder price ends in <b><span id="countdown">—:—:—</span></b></p>
            <div class="form-actions" style="justify-content:flex-start">
              <!-- Deposit: replace href with your checkout/deposit link -->
              <a id="depositBtn" class="btn btn--primary" href="/deposit-link">Pay $500 Deposit</a>
              <a class="btn btn--ghost" href="#iqt-pro">See Estimate First</a>
            </div>
            <p class="hint">Balance due at handoff (in ~2–3 weeks). No retainer.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<script>
// Countdown (set your real deadline)
(function(){
  const end = new Date('2025-09-30T23:59:59-05:00').getTime();
  const el  = document.getElementById('countdown');
  const pad = n => n<10? '0'+n : n;
  function tick(){
    const ms = end - Date.now();
    if(ms<=0){ el.textContent = '00:00:00'; return; }
    const h = Math.floor(ms/3.6e6);
    const m = Math.floor(ms/6e4)%60;
    const s = Math.floor(ms/1e3)%60;
    el.textContent = `${pad(h)}:${pad(m)}:${pad(s)}`;
    requestAnimationFrame(tick);
  }
  tick();
})();
// Visual slots decrement after deposit click (optional)
document.getElementById('depositBtn')?.addEventListener('click', ()=> {
  const s = document.getElementById('slots');
  const n = Math.max(0, parseInt(s.textContent||'3',10)-1);
  s.textContent = String(n);
});
</script>


<!-- INSTANT QUOTE (tight + structured, full page width, no borders showing as white) -->
<section id="iqt-pro" aria-labelledby="iqt-title">
  <div class="iqt-shell">
    <header class="iqt-head">
      <p class="iqt-eyebrow">Instant Quote</p>
      <h2 id="iqt-title" class="iqt-title">A real-world estimator—clean, fast, credible.</h2>
      <p class="iqt-sub">This is a preliminary ballpark to start the conversation. We’ll confirm on a quick call or site visit.</p>
      <ul class="iqt-chips">
        <li>Adjust assumptions, see impact</li>
        <li>Materials/Labor/Overhead breakdown</li>
        <li>Distance & rush controls</li>
      </ul>
    </header>

    <div class="iqt-grid">
      <!-- LEFT: FORM -->
      <div class="card">
        <div class="card-head">
          <h3 class="card-title">Project Details</h3>
        </div>
        <div class="card-body">
          <!-- Tabs -->
          <div class="tabs" role="tablist" aria-label="Trade">
            <button type="button" class="tab is-on" data-trade="roofing" aria-selected="true">Roofing</button>
            <button type="button" class="tab" data-trade="remodel" aria-selected="false">Remodel</button>
            <button type="button" class="tab" data-trade="hvac" aria-selected="false">HVAC</button>
            <button type="button" class="tab" data-trade="landscaping" aria-selected="false">Landscaping</button>
          </div>

          <!-- Shared Basics -->
          <div class="sec">
            <p class="sec-title">Basics</p>
            <div class="row two">
              <div>
                <label class="label" for="sqft">Approximate area (sq ft)</label>
                <input id="sqft" class="input" type="number" min="50" step="10" value="1200" required>
              </div>
              <div>
                <label class="label" for="distance">Distance from shop (miles)</label>
                <input id="distance" class="input" type="number" min="0" step="1" value="12">
              </div>
            </div>
            <div class="row two" style="margin-top:10px">
              <div>
                <label class="label" for="complexity">Complexity</label>
                <select id="complexity" class="input">
                  <option value="low">Low</option>
                  <option value="standard" selected>Standard</option>
                  <option value="high">High</option>
                </select>
              </div>
              <div class="check" style="align-self:end">
                <input id="rush" type="checkbox"> <label for="rush" style="cursor:pointer">Rush turnaround</label>
              </div>
            </div>
          </div>

          <!-- Roofing -->
          <div class="sec trade trade--roofing">
            <p class="sec-title">Roofing Options</p>
            <div class="row two">
              <div>
                <label class="label" for="roofStories">Stories</label>
                <select id="roofStories" class="input">
                  <option value="1">1</option><option value="2" selected>2</option><option value="3">3</option>
                </select>
              </div>
              <div>
                <label class="label" for="roofPitch">Roof pitch</label>
                <select id="roofPitch" class="input">
                  <option value="low">Low (≤4/12)</option>
                  <option value="medium" selected>Medium (5–8/12)</option>
                  <option value="steep">Steep (≥9/12)</option>
                </select>
              </div>
            </div>
            <div class="row two" style="margin-top:10px">
              <label class="check"><input id="tearOff" type="checkbox"> <span>Tear-off existing roof</span></label>
              <label class="check"><input id="premiumRoof" type="checkbox"> <span>Premium shingles/metal</span></label>
            </div>
          </div>

          <!-- Remodel -->
          <div class="sec trade trade--remodel" hidden>
            <p class="sec-title">Remodel Options</p>
            <div class="row two">
              <div>
                <label class="label" for="roomType">Room type</label>
                <select id="roomType" class="input">
                  <option value="kitchen" selected>Kitchen</option>
                  <option value="bath">Bath</option>
                  <option value="basement">Basement</option>
                  <option value="addition">Addition</option>
                </select>
              </div>
              <div>
                <label class="label" for="finishLevel">Finish level</label>
                <select id="finishLevel" class="input">
                  <option value="standard" selected>Standard</option>
                  <option value="premium">Premium</option>
                  <option value="luxury">Luxury</option>
                </select>
              </div>
            </div>
            <label class="check" style="margin-top:10px"><input id="permits" type="checkbox"> <span>Permits/engineering required</span></label>
          </div>

          <!-- HVAC -->
          <div class="sec trade trade--hvac" hidden>
            <p class="sec-title">HVAC Options</p>
            <div class="row two">
              <div>
                <label class="label" for="tonnage">System size (tons)</label>
                <select id="tonnage" class="input">
                  <option>2.0</option><option selected>3.0</option><option>4.0</option><option>5.0</option>
                </select>
              </div>
              <div>
                <label class="label" for="seer">Efficiency</label>
                <select id="seer" class="input">
                  <option value="14">SEER 14–15</option>
                  <option value="16" selected>SEER 16–18</option>
                  <option value="20">SEER 20+</option>
                </select>
              </div>
            </div>
            <label class="check" style="margin-top:10px"><input id="ductwork" type="checkbox"> <span>New/major ductwork</span></label>
          </div>

          <!-- Landscaping -->
          <div class="sec trade trade--landscaping" hidden>
            <p class="sec-title">Landscaping Options</p>
            <div class="row">
              <label class="label" for="features">Features</label>
              <select id="features" class="input" multiple>
                <option value="patio">Patio</option>
                <option value="retaining">Retaining wall</option>
                <option value="irrigation">Irrigation</option>
                <option value="lighting">Lighting</option>
                <option value="planting">Planting beds</option>
              </select>
              <p class="hint">Hold Ctrl/Cmd to select multiple.</p>
            </div>
            <label class="check" style="margin-top:10px"><input id="premiumLand" type="checkbox"> <span>Premium stone/materials</span></label>
          </div>

          <!-- Files -->
          <div class="sec">
            <p class="sec-title">Photos / Plans (optional)</p>
            <input id="files" type="file" multiple class="input" accept=".jpg,.jpeg,.png,.pdf">
            <p class="hint">File names are included in the estimate email so we can match your project.</p>
          </div>

          <div class="form-actions">
            <button type="button" class="btn btn--neutral" id="resetForm">Reset</button>
            <button type="button" class="btn btn--primary" id="calcEstimate">See Estimate</button>
          </div>
        </div>
      </div>

      <!-- RIGHT: ESTIMATE (sticky) -->
      <aside class="card sticky">
        <div class="card-head">
          <h3 class="card-title">Estimate & Email</h3>
        </div>
        <div class="card-body">
          <span class="pill">Preliminary Ballpark</span>
          <div class="range">
            <div>
              <div class="num" id="estLow">$—</div>
              <div class="numhint">Low</div>
            </div>
            <div>
              <div class="num" id="estHigh">$—</div>
              <div class="numhint">High</div>
            </div>
          </div>

          <div class="acc">
            <span class="acc-label">Confidence</span>
            <div class="acc-bar"><span id="accBar" style="width:0%"></span></div>
            <span class="acc-note" id="accNote">—</span>
          </div>

          <div class="bars">
            <div class="bline">
              <span>Materials</span>
              <div class="rail"><i id="barMat" style="width:0%"></i></div>
              <strong id="matNum">$—</strong>
            </div>
            <div class="bline">
              <span>Labor</span>
              <div class="rail"><i id="barLab" style="width:0%"></i></div>
              <strong id="labNum">$—</strong>
            </div>
            <div class="bline">
              <span>Travel & Overhead</span>
              <div class="rail"><i id="barOh" style="width:0%"></i></div>
              <strong id="ohNum">$—</strong>
            </div>
          </div>

          <details class="assm">
            <summary>Assumptions & Notes</summary>
            <ul id="assumptionsList"></ul>
          </details>

          <div class="sec" style="margin-top:12px">
            <p class="sec-title">Email Me This Estimate</p>
            <div class="stack">
              <div class="row two">
                <div>
                  <label class="label" for="custName">Name</label>
                  <input id="custName" class="input" type="text" autocomplete="name" />
                </div>
                <div>
                  <label class="label" for="custEmail">Email</label>
                  <input id="custEmail" class="input" type="email" autocomplete="email" />
                </div>
              </div>
              <div>
                <label class="label" for="custPhone">Phone (optional)</label>
                <input id="custPhone" class="input" type="tel" autocomplete="tel" />
              </div>
              <div class="form-actions" style="justify-content:flex-start;padding-top:0;border:none;margin:0">
                <button class="btn btn--primary" id="sendEstimate">
                  <span>Send & Request Call</span>
                </button>
                <button class="btn btn--ghost" id="bookCall">Book Site Assessment</button>
              </div>
              <p class="error" id="err" hidden></p>
              <div class="success" id="ok" hidden>
                <div class="check" aria-hidden="true"></div>
                <p>Sent. We’ll email your estimate and next steps today.</p>
              </div>
            </div>
          </div>

        </div>
      </aside>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer class="footer">
  <div class="footer-in">© <span id="year"></span> BIM Labs. All rights reserved.</div>
</footer>

<script>
/* Year */
document.getElementById('year').textContent = new Date().getFullYear();

/* Tabs (trades) */
const tabs = Array.from(document.querySelectorAll('.tab'));
const trades = {
  roofing: document.querySelector('.trade--roofing'),
  remodel: document.querySelector('.trade--remodel'),
  hvac: document.querySelector('.trade--hvac'),
  landscaping: document.querySelector('.trade--landscaping'),
};
let activeTrade = 'roofing';
function setTrade(t){
  activeTrade = t;
  tabs.forEach(b=>{
    const on = b.dataset.trade === t;
    b.classList.toggle('is-on', on);
    b.setAttribute('aria-selected', on ? 'true' : 'false');
  });
  Object.entries(trades).forEach(([k,node])=> node.hidden = k !== t);
}
tabs.forEach(b=> b.addEventListener('click', ()=> setTrade(b.dataset.trade)));

/* Inputs */
const el = {
  sqft: document.getElementById('sqft'),
  distance: document.getElementById('distance'),
  complexity: document.getElementById('complexity'),
  rush: document.getElementById('rush'),
  files: document.getElementById('files'),
  // Roofing
  roofStories: document.getElementById('roofStories'),
  roofPitch: document.getElementById('roofPitch'),
  tearOff: document.getElementById('tearOff'),
  premiumRoof: document.getElementById('premiumRoof'),
  // Remodel
  roomType: document.getElementById('roomType'),
  finishLevel: document.getElementById('finishLevel'),
  permits: document.getElementById('permits'),
  // HVAC
  tonnage: document.getElementById('tonnage'),
  seer: document.getElementById('seer'),
  ductwork: document.getElementById('ductwork'),
  // Landscaping
  features: document.getElementById('features'),
  premiumLand: document.getElementById('premiumLand'),

  // Estimate output
  estLow: document.getElementById('estLow'),
  estHigh: document.getElementById('estHigh'),
  accBar: document.getElementById('accBar'),
  accNote: document.getElementById('accNote'),
  barMat: document.getElementById('barMat'),
  barLab: document.getElementById('barLab'),
  barOh: document.getElementById('barOh'),
  matNum: document.getElementById('matNum'),
  labNum: document.getElementById('labNum'),
  ohNum: document.getElementById('ohNum'),
  assumptionsList: document.getElementById('assumptionsList'),

  // Buttons
  calcEstimate: document.getElementById('calcEstimate'),
  resetForm: document.getElementById('resetForm'),
  sendEstimate: document.getElementById('sendEstimate'),
  bookCall: document.getElementById('bookCall'),

  // Email
  custName: document.getElementById('custName'),
  custEmail: document.getElementById('custEmail'),
  custPhone: document.getElementById('custPhone'),
  err: document.getElementById('err'),
  ok: document.getElementById('ok'),
};

/* Pricing config (illustrative) */
const CFG = {
  roofing: {
    baseRate: 7.8, minBase: 9000,
    comp: { low: 0.92, standard: 1.0, high: 1.28 },
    pitch: { low: 0.96, medium: 1.0, steep: 1.18 },
    stories: { '1': 0.96, '2': 1.0, '3': 1.12 },
    tearOff: 1.10, premium: 1.18,
    laborFactor: 0.44, overheadPerMile: 2.4, rush: 1.10
  },
  remodel: {
    baseRate: 15.0, minBase: 14000,
    comp: { low: 0.95, standard: 1.0, high: 1.35 },
    roomMul: { kitchen: 1.2, bath: 1.1, basement: 1.15, addition: 1.35 },
    finish: { standard: 1.0, premium: 1.18, luxury: 1.35 },
    permits: 1.08,
    laborFactor: 0.5, overheadPerMile: 2.8, rush: 1.12
  },
  hvac: {
    baseRate: 9.2, minBase: 7000,
    comp: { low: 0.92, standard: 1.0, high: 1.28 },
    tonsMul: { '2.0': 0.92, '3.0': 1.0, '4.0': 1.15, '5.0': 1.28 },
    seerMul: { '14': 0.95, '16': 1.0, '20': 1.18 },
    duct: 1.15,
    laborFactor: 0.46, overheadPerMile: 2.1, rush: 1.12
  },
  landscaping: {
    baseRate: 6.6, minBase: 6500,
    comp: { low: 0.92, standard: 1.0, high: 1.32 },
    features: { patio: 1.15, retaining: 1.22, irrigation: 1.12, lighting: 1.10, planting: 1.08 },
    premium: 1.20,
    laborFactor: 0.46, overheadPerMile: 1.7, rush: 1.08
  }
};

const money = n => isFinite(n) ? n.toLocaleString(undefined,{style:'currency',currency:'USD',maximumFractionDigits:0}) : '$—';
const clamp = (v,a,b)=> Math.max(a, Math.min(b, v));

function compute(){
  const T = CFG[activeTrade];
  const sqft = Math.max(0, Number(el.sqft.value||0));
  const miles = Math.max(0, Number(el.distance.value||0));
  const compv = el.complexity.value;

  let base = Math.max(T.minBase, sqft * T.baseRate);
  base *= (T.comp[compv] || 1.0);

  const assumptions = [];
  // Per-trade
  if(activeTrade === 'roofing'){
    base *= (T.pitch[el.roofPitch.value] || 1.0);
    base *= (T.stories[el.roofStories.value] || 1.0);
    if(el.tearOff.checked){ base *= T.tearOff; assumptions.push('Includes tear-off'); }
    if(el.premiumRoof.checked){ base *= T.premium; assumptions.push('Premium shingles/metal'); }
    assumptions.push(`Stories: ${el.roofStories.value}, Pitch: ${el.roofPitch.value}`);
  }
  if(activeTrade === 'remodel'){
    base *= (T.roomMul[el.roomType.value] || 1.0);
    base *= (T.finish[el.finishLevel.value] || 1.0);
    if(el.permits.checked){ base *= T.permits; assumptions.push('Includes permits/engineering'); }
    assumptions.push(`Room: ${el.roomType.value}, Finish: ${el.finishLevel.value}`);
  }
  if(activeTrade === 'hvac'){
    base *= (T.tonsMul[el.tonnage.value] || 1.0);
    base *= (T.seerMul[el.seer.value] || 1.0);
    if(el.ductwork.checked){ base *= T.duct; assumptions.push('Major ductwork'); }
    assumptions.push(`System: ${el.tonnage.value} tons, SEER ${el.seer.value}+`);
  }
  if(activeTrade === 'landscaping'){
    const selected = [...el.features.selectedOptions].map(o=>o.value);
    selected.forEach(f=> base *= (T.features[f] || 1.0));
    if(el.premiumLand.checked){ base *= T.premium; assumptions.push('Premium stone/materials'); }
    assumptions.push(`Features: ${selected.length ? selected.join(', ') : 'None'}`);
  }

  if(el.rush.checked){ base *= T.rush; assumptions.push('Rush turnaround'); }

  const overhead = miles * T.overheadPerMile * 2;
  const subtotal = base + overhead;

  // Confidence
  let conf = 0.55;
  if(sqft > 1000) conf += 0.12;
  if(sqft > 2000) conf += 0.1;
  if(compv === 'low') conf += 0.05;
  if(compv === 'high') conf -= 0.08;

  const premiumFlags = [
    el.premiumRoof?.checked, el.premiumLand?.checked, el.ductwork?.checked, el.permits?.checked
  ].filter(Boolean).length;
  conf -= premiumFlags * 0.02;
  conf = clamp(conf, 0.45, 0.92);

  const spread = (1 - conf) * 0.34 + 0.10;
  const low  = subtotal * (1 - spread/2);
  const high = subtotal * (1 + spread/2);

  const labor = subtotal * T.laborFactor;
  const materials = Math.max(0, subtotal - labor - overhead);

  assumptions.push(`Distance: ${miles} mi`);
  assumptions.push(`Complexity: ${compv}`);
  if(sqft) assumptions.push(`Area: ~${Math.round(sqft)} sq ft`);

  const mid = (low + high)/2;
  const pmPct = Math.round((((high - low)/2)/mid)*100);

  return { low, high, materials, labor, overhead, conf, pmPct, assumptions };
}

function renderEstimate(){
  const r = compute();
  el.estLow.textContent  = money(r.low);
  el.estHigh.textContent = money(r.high);
  const confPct = Math.round(r.conf*100);
  el.accBar.style.width = confPct + '%';
  el.accNote.textContent = `±${r.pmPct}% • ${confPct}% confidence`;

  el.matNum.textContent = money(r.materials);
  el.labNum.textContent = money(r.labor);
  el.ohNum.textContent  = money(r.overhead);
  const total = (r.materials + r.labor + r.overhead) || 1;
  el.barMat.style.width = Math.round((r.materials/total)*100) + '%';
  el.barLab.style.width = Math.round((r.labor/total)*100) + '%';
  el.barOh.style.width  = Math.round((r.overhead/total)*100) + '%';

  el.assumptionsList.innerHTML = '';
  r.assumptions.forEach(a=>{
    const li = document.createElement('li'); li.textContent = a; el.assumptionsList.appendChild(li);
  });

  return r;
}

/* Calculate & Reset */
el.calcEstimate.addEventListener('click', ()=>{
  if(!el.sqft.value || Number(el.sqft.value) < 50){ el.sqft.focus(); return; }
  renderEstimate();
});
el.resetForm.addEventListener('click', ()=>{
  document.querySelector('form')?.reset?.();
  // Manually reset selects and checkboxes where needed
  setTrade('roofing');
  el.sqft.value = 1200; el.distance.value = 12; el.complexity.value = 'standard';
  el.tearOff.checked = false; el.premiumRoof.checked = false;
  el.finishLevel.value = 'standard'; el.roomType.value = 'kitchen'; el.permits.checked = false;
  el.tonnage.value = '3.0'; el.seer.value = '16'; el.ductwork.checked = false;
  [...el.features.options].forEach(o=> o.selected = false);
  el.premiumLand.checked = false; el.rush.checked = false;

  // Clear estimate
  ['estLow','estHigh','matNum','labNum','ohNum'].forEach(id=> document.getElementById(id).textContent = '$—');
  ['barMat','barLab','barOh'].forEach(id=> document.getElementById(id).style.width = '0%');
  el.accBar.style.width = '0%'; el.accNote.textContent = '—';
  el.assumptionsList.innerHTML = '';
  el.err.hidden = true; el.ok.hidden = true;
});

/* Email */
el.sendEstimate.addEventListener('click', async ()=>{
  el.err.hidden = true; el.ok.hidden = true;
  if(!el.custName.value.trim() || !el.custEmail.value.trim()){
    el.err.textContent = 'Please enter your name and email.'; el.err.hidden = false; return;
  }
  const snap = renderEstimate();
  const landFeatures = el.features ? [...el.features.selectedOptions].map(o=>o.value) : [];
  const fileNames = el.files?.files ? [...el.files.files].map(f=>f.name) : [];

  const payload = {
    source: 'BIM Instant Quote — Contractors (Full Page)',
    trade: activeTrade,
    inputs: {
      sqft: Number(el.sqft.value||0),
      distance_miles: Number(el.distance.value||0),
      complexity: el.complexity.value,
      rush: !!el.rush.checked,
      roofing: {
        stories: el.roofStories?.value || null,
        pitch: el.roofPitch?.value || null,
        tear_off: !!el.tearOff?.checked,
        premium: !!el.premiumRoof?.checked
      },
      remodel: {
        room: el.roomType?.value || null,
        finish: el.finishLevel?.value || null,
        permits: !!el.permits?.checked
      },
      hvac: {
        tonnage: el.tonnage?.value || null,
        seer: el.seer?.value || null,
        ductwork: !!el.ductwork?.checked
      },
      landscaping: {
        features: landFeatures,
        premium: !!el.premiumLand?.checked
      },
      files: fileNames
    },
    estimate: {
      low: Math.round(snap.low),
      high: Math.round(snap.high),
      materials: Math.round(snap.materials),
      labor: Math.round(snap.labor),
      overhead: Math.round(snap.overhead),
      confidence: snap.conf,
      plusminus_pct: snap.pmPct,
      assumptions: snap.assumptions
    },
    customer: {
      name: el.custName.value.trim(),
      email: el.custEmail.value.trim(),
      phone: el.custPhone.value.trim()
    }
  };

  const btn = el.sendEstimate;
  btn.disabled = true; btn.textContent = 'Sending...';
  try{
    await fetch('https://formspree.io/f/xkgbgbjd', {
      method:'POST',
      headers:{ 'Accept':'application/json','Content-Type':'application/json' },
      body: JSON.stringify(payload)
    });
    el.ok.hidden = false;
  }catch{
    el.err.textContent = 'Could not send right now. Please try again in a moment.'; el.err.hidden = false;
  }finally{
    btn.disabled = false; btn.textContent = 'Send & Request Call';
  }
});

/* Book call */
el.bookCall.addEventListener('click', (e)=>{
  e.preventDefault();
  document.getElementById('contact')?.scrollIntoView({behavior:'smooth'});
});

/* Live re-render on input (kept tight) */
[
  el.sqft, el.distance, el.complexity, el.rush, el.files,
  el.roofStories, el.roofPitch, el.tearOff, el.premiumRoof,
  el.roomType, el.finishLevel, el.permits,
  el.tonnage, el.seer, el.ductwork,
  el.features, el.premiumLand
].forEach(ctrl=>{
  if(!ctrl) return;
  ctrl.addEventListener('input', ()=> renderEstimate());
});

/* Init */
setTrade('roofing');
</script>
  <div id="stickyCTA" style="position:fixed;left:0;right:0;bottom:0;z-index:999;background:#0E1116;border-top:1px solid #1e232e;box-shadow:0 -6px 24px rgba(0,0,0,.25);">
  <div class="footer-in" style="display:flex;gap:12px;align-items:center;justify-content:space-between;padding:10px 0;">
    <div style="font-weight:800;color:#E8EEF6;">Founder Build $1,500 · <span style="color:#9fd6ff">3 slots</span> · ends in <span id="countdownMini">—:—:—</span></div>
    <div style="display:flex;gap:8px;flex-wrap:wrap">
      <a class="btn btn--primary" href="/deposit-link">Pay $500 Deposit</a>
      <a class="btn btn--ghost" href="#iqt-pro">See Estimate</a>
    </div>
  </div>
</div>
<script>
(function syncMini(){
  const src = document.getElementById('countdown');
  const mini= document.getElementById('countdownMini');
  if(!src||!mini) return;
  const o = new MutationObserver(()=> mini.textContent = src.textContent);
  o.observe(src,{childList:true,characterData:true,subtree:true});
  mini.textContent = src.textContent;
})();
</script>

</body>
</html>
